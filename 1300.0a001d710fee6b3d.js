"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1300],{4449:(H,F,b)=>{function O(f){return function h(f){return new DataView(Uint8Array.from(f).buffer)}(f.trim().split(" ").filter(v=>""!==v).map(v=>parseInt(v,16)))}function d(f){return function D(f){return Array.from(new Uint8Array(f.buffer))}(f).map(S=>{let v=S.toString(16);return 1==v.length&&(v="0"+v),v}).join(" ")}function _(f){if("string"==typeof f)return f;if("number"==typeof f)return function w(f){return`0000${f.toString(16).padStart(4,"0")}-0000-1000-8000-00805f9b34fb`}(f);throw new Error("Invalid UUID")}function Z(f){const S={};if(f)return f.forEach((v,p)=>{S[p.toString()]=v}),S}b.d(F,{FF:()=>d,GA:()=>Z,JA:()=>_,_j:()=>O})},7423:(H,F,b)=>{b.d(F,{Uw:()=>$,dV:()=>p,fo:()=>M});var h=b(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var _=(()=>{return(u=_||(_={})).Unimplemented="UNIMPLEMENTED",u.Unavailable="UNAVAILABLE",_;var u})();class Z extends Error{constructor(i,n,e){super(i),this.message=i,this.code=n,this.data=e}}const S=u=>{var i,n,e,t,r;const a=u.CapacitorCustomPlatform||null,s=u.Capacitor||{},l=s.Plugins=s.Plugins||{},g=u.CapacitorPlatforms,N=(null===(i=null==g?void 0:g.currentPlatform)||void 0===i?void 0:i.getPlatform)||(()=>null!==a?a.name:(u=>{var i,n;return null!=u&&u.androidBridge?"android":null!==(n=null===(i=null==u?void 0:u.webkit)||void 0===i?void 0:i.messageHandlers)&&void 0!==n&&n.bridge?"ios":"web"})(u)),le=(null===(n=null==g?void 0:g.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==N()),fe=(null===(e=null==g?void 0:g.currentPlatform)||void 0===e?void 0:e.isPluginAvailable)||(m=>{const y=te.get(m);return!!(null!=y&&y.platforms.has(N())||ae(m))}),ae=(null===(t=null==g?void 0:g.currentPlatform)||void 0===t?void 0:t.getPluginHeader)||(m=>{var y;return null===(y=s.PluginHeaders)||void 0===y?void 0:y.find(j=>j.name===m)}),te=new Map,pe=(null===(r=null==g?void 0:g.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((m,y={})=>{const j=te.get(m);if(j)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),j.proxy;const B=N(),k=ae(m);let U;const me=function(){var C=(0,h.Z)(function*(){return!U&&B in y?U=U="function"==typeof y[B]?yield y[B]():y[B]:null!==a&&!U&&"web"in y&&(U=U="function"==typeof y.web?yield y.web():y.web),U});return function(){return C.apply(this,arguments)}}(),ne=C=>{let E;const L=(...I)=>{const T=me().then(P=>{const q=((C,E)=>{var L,I;if(!k){if(C)return null===(I=C[E])||void 0===I?void 0:I.bind(C);throw new Z(`"${m}" plugin is not implemented on ${B}`,_.Unimplemented)}{const T=null==k?void 0:k.methods.find(P=>E===P.name);if(T)return"promise"===T.rtype?P=>s.nativePromise(m,E.toString(),P):(P,q)=>s.nativeCallback(m,E.toString(),P,q);if(C)return null===(L=C[E])||void 0===L?void 0:L.bind(C)}})(P,C);if(q){const Y=q(...I);return E=null==Y?void 0:Y.remove,Y}throw new Z(`"${m}.${C}()" is not implemented on ${B}`,_.Unimplemented)});return"addListener"===C&&(T.remove=(0,h.Z)(function*(){return E()})),T};return L.toString=()=>`${C.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:C,writable:!1,configurable:!1}),L},ce=ne("addListener"),ue=ne("removeListener"),Ce=(C,E)=>{const L=ce({eventName:C},E),I=function(){var P=(0,h.Z)(function*(){const q=yield L;ue({eventName:C,callbackId:q},E)});return function(){return P.apply(this,arguments)}}(),T=new Promise(P=>L.then(()=>P({remove:I})));return T.remove=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield I()}),T},ie=new Proxy({},{get(C,E){switch(E){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?Ce:ce;case"removeListener":return ue;default:return ne(E)}}});return l[m]=ie,te.set(m,{name:m,proxy:ie,platforms:new Set([...Object.keys(y),...k?[B]:[]])}),ie});return s.convertFileSrc||(s.convertFileSrc=m=>m),s.getPlatform=N,s.handleError=m=>u.console.error(m),s.isNativePlatform=le,s.isPluginAvailable=fe,s.pluginMethodNoop=(m,y,j)=>Promise.reject(`${j} does not have an implementation of "${y}".`),s.registerPlugin=pe,s.Exception=Z,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},p=(u=>u.Capacitor=S(u))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),M=p.registerPlugin;class ${constructor(i){this.listeners={},this.windowListeners={},i&&(console.warn(`Capacitor WebPlugin "${i.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=i)}addListener(i,n){var e=this;this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(n);const r=this.windowListeners[i];r&&!r.registered&&this.addWindowListener(r);const a=function(){var l=(0,h.Z)(function*(){return e.removeListener(i,n)});return function(){return l.apply(this,arguments)}}(),s=Promise.resolve({remove:a});return Object.defineProperty(s,"remove",{value:(l=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield a()}),function(){return l.apply(this,arguments)})}),s;var l}removeAllListeners(){var i=this;return(0,h.Z)(function*(){i.listeners={};for(const n in i.windowListeners)i.removeWindowListener(i.windowListeners[n]);i.windowListeners={}})()}notifyListeners(i,n){const e=this.listeners[i];e&&e.forEach(t=>t(n))}hasListeners(i){return!!this.listeners[i].length}registerWindowListener(i,n){this.windowListeners[n]={registered:!1,windowEventName:i,pluginEventName:n,handler:e=>{this.notifyListeners(n,e)}}}unimplemented(i="not implemented"){return new p.Exception(i,_.Unimplemented)}unavailable(i="not available"){return new p.Exception(i,_.Unavailable)}removeListener(i,n){var e=this;return(0,h.Z)(function*(){const t=e.listeners[i];if(!t)return;const r=t.indexOf(n);e.listeners[i].splice(r,1),e.listeners[i].length||e.removeWindowListener(e.windowListeners[i])})()}addWindowListener(i){window.addEventListener(i.windowEventName,i.handler),i.registered=!0}removeWindowListener(i){i&&(window.removeEventListener(i.windowEventName,i.handler),i.registered=!1)}}const V=u=>encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),W=u=>u.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class J extends ${getCookies(){return(0,h.Z)(function*(){const i=document.cookie,n={};return i.split(";").forEach(e=>{if(e.length<=0)return;let[t,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=W(t).trim(),r=W(r).trim(),n[t]=r}),n})()}setCookie(i){return(0,h.Z)(function*(){try{const n=V(i.key),e=V(i.value),t=`; expires=${(i.expires||"").replace("expires=","")}`,r=(i.path||"/").replace("path=",""),a=null!=i.url&&i.url.length>0?`domain=${i.url}`:"";document.cookie=`${n}=${e||""}${t}; path=${r}; ${a};`}catch(n){return Promise.reject(n)}})()}deleteCookie(i){return(0,h.Z)(function*(){try{document.cookie=`${i.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})()}clearCookies(){return(0,h.Z)(function*(){try{const i=document.cookie.split(";")||[];for(const n of i)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(i){return Promise.reject(i)}})()}clearAllCookies(){var i=this;return(0,h.Z)(function*(){try{yield i.clearCookies()}catch(n){return Promise.reject(n)}})()}}M("CapacitorCookies",{web:()=>new J});const K=function(){var u=(0,h.Z)(function*(i){return new Promise((n,e)=>{const t=new FileReader;t.onload=()=>{const r=t.result;n(r.indexOf(",")>=0?r.split(",")[1]:r)},t.onerror=r=>e(r),t.readAsDataURL(i)})});return function(n){return u.apply(this,arguments)}}();class X extends ${request(i){return(0,h.Z)(function*(){const n=((u,i={})=>{const n=Object.assign({method:u.method||"GET",headers:u.headers},i),t=((u={})=>{const i=Object.keys(u);return Object.keys(u).map(t=>t.toLocaleLowerCase()).reduce((t,r,a)=>(t[r]=u[i[a]],t),{})})(u.headers)["content-type"]||"";if("string"==typeof u.data)n.body=u.data;else if(t.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[a,s]of Object.entries(u.data||{}))r.set(a,s);n.body=r.toString()}else if(t.includes("multipart/form-data")){const r=new FormData;if(u.data instanceof FormData)u.data.forEach((s,l)=>{r.append(l,s)});else for(const s of Object.keys(u.data))r.append(s,u.data[s]);n.body=r;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(t.includes("application/json")||"object"==typeof u.data)&&(n.body=JSON.stringify(u.data));return n})(i,i.webFetchExtra),e=((u,i=!0)=>u?Object.entries(u).reduce((e,t)=>{const[r,a]=t;let s,l;return Array.isArray(a)?(l="",a.forEach(g=>{s=i?encodeURIComponent(g):g,l+=`${r}=${s}&`}),l.slice(0,-1)):(s=i?encodeURIComponent(a):a,l=`${r}=${s}`),`${e}&${l}`},"").substr(1):null)(i.params,i.shouldEncodeUrlParams),t=e?`${i.url}?${e}`:i.url,r=yield fetch(t,n),a=r.headers.get("content-type")||"";let l,g,{responseType:s="text"}=r.ok?i:{};switch(a.includes("application/json")&&(s="json"),s){case"arraybuffer":case"blob":g=yield r.blob(),l=yield K(g);break;case"json":l=yield r.json();break;default:l=yield r.text()}const x={};return r.headers.forEach((N,ee)=>{x[ee]=N}),{data:l,headers:x,status:r.status,url:r.url}})()}get(i){var n=this;return(0,h.Z)(function*(){return n.request(Object.assign(Object.assign({},i),{method:"GET"}))})()}post(i){var n=this;return(0,h.Z)(function*(){return n.request(Object.assign(Object.assign({},i),{method:"POST"}))})()}put(i){var n=this;return(0,h.Z)(function*(){return n.request(Object.assign(Object.assign({},i),{method:"PUT"}))})()}patch(i){var n=this;return(0,h.Z)(function*(){return n.request(Object.assign(Object.assign({},i),{method:"PATCH"}))})()}delete(i){var n=this;return(0,h.Z)(function*(){return n.request(Object.assign(Object.assign({},i),{method:"DELETE"}))})()}}M("CapacitorHttp",{web:()=>new X})},8881:(H,F,b)=>{b.d(F,{Z:()=>u});var h=b(5698),D=b(4004),o=b(8256),c=b(5861),w=b(7423),O=b(4449);const d=(0,w.fo)("BluetoothLe",{web:()=>b.e(2728).then(b.bind(b,2728)).then(i=>new i.BluetoothLeWeb)}),_=()=>{let i=Promise.resolve();return n=>new Promise((e,t)=>{i=i.then(()=>n()).then(e).catch(t)})};function Z(i){return i?_():n=>n()}function f(i){if("string"!=typeof i)throw new Error(`Invalid UUID type ${typeof i}. Expected string.`);if(!((i=i.toLowerCase()).search(/^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$/)>=0))throw new Error(`Invalid UUID format ${i}. Expected 128 bit string (e.g. "0000180d-0000-1000-8000-00805f9b34fb").`);return i}const v=new class S{constructor(){this.scanListener=null,this.eventListeners=new Map,this.queue=Z(!0)}enableQueue(){this.queue=Z(!0)}disableQueue(){this.queue=Z(!1)}initialize(n){var e=this;return(0,c.Z)(function*(){yield e.queue((0,c.Z)(function*(){yield d.initialize(n)}))})()}getEnabled(){var n=this;return(0,c.Z)(function*(){return n.isEnabled()})()}isEnabled(){var n=this;return(0,c.Z)(function*(){return yield n.queue((0,c.Z)(function*(){return(yield d.isEnabled()).value}))})()}enable(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){yield d.enable()}))})()}disable(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){yield d.disable()}))})()}startEnabledNotifications(n){var e=this;return(0,c.Z)(function*(){yield e.queue((0,c.Z)(function*(){var t;const r="onEnabledChanged";yield null===(t=e.eventListeners.get(r))||void 0===t?void 0:t.remove();const a=yield d.addListener(r,s=>{n(s.value)});e.eventListeners.set(r,a),yield d.startEnabledNotifications()}))})()}stopEnabledNotifications(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){var e;const t="onEnabledChanged";yield null===(e=n.eventListeners.get(t))||void 0===e?void 0:e.remove(),n.eventListeners.delete(t),yield d.stopEnabledNotifications()}))})()}isLocationEnabled(){var n=this;return(0,c.Z)(function*(){return yield n.queue((0,c.Z)(function*(){return(yield d.isLocationEnabled()).value}))})()}openLocationSettings(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){yield d.openLocationSettings()}))})()}openBluetoothSettings(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){yield d.openBluetoothSettings()}))})()}openAppSettings(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){yield d.openAppSettings()}))})()}setDisplayStrings(n){var e=this;return(0,c.Z)(function*(){yield e.queue((0,c.Z)(function*(){yield d.setDisplayStrings(n)}))})()}requestDevice(n){var e=this;return(0,c.Z)(function*(){return n=n?e.validateRequestBleDeviceOptions(n):void 0,yield e.queue((0,c.Z)(function*(){return yield d.requestDevice(n)}))})()}requestLEScan(n,e){var t=this;return(0,c.Z)(function*(){n=t.validateRequestBleDeviceOptions(n),yield t.queue((0,c.Z)(function*(){var r;yield null===(r=t.scanListener)||void 0===r?void 0:r.remove(),t.scanListener=yield d.addListener("onScanResult",a=>{const s=Object.assign(Object.assign({},a),{manufacturerData:t.convertObject(a.manufacturerData),serviceData:t.convertObject(a.serviceData),rawAdvertisement:a.rawAdvertisement?t.convertValue(a.rawAdvertisement):void 0});e(s)}),yield d.requestLEScan(n)}))})()}stopLEScan(){var n=this;return(0,c.Z)(function*(){yield n.queue((0,c.Z)(function*(){var e;yield null===(e=n.scanListener)||void 0===e?void 0:e.remove(),n.scanListener=null,yield d.stopLEScan()}))})()}getDevices(n){var e=this;return(0,c.Z)(function*(){return e.queue((0,c.Z)(function*(){return(yield d.getDevices({deviceIds:n})).devices}))})()}getConnectedDevices(n){var e=this;return(0,c.Z)(function*(){if(!Array.isArray(n))throw new Error("services must be an array");return n=n.map(f),e.queue((0,c.Z)(function*(){return(yield d.getConnectedDevices({services:n})).devices}))})()}connect(n,e,t){var r=this;return(0,c.Z)(function*(){yield r.queue((0,c.Z)(function*(){var a;if(e){const s=`disconnected|${n}`;yield null===(a=r.eventListeners.get(s))||void 0===a?void 0:a.remove();const l=yield d.addListener(s,()=>{e(n)});r.eventListeners.set(s,l)}yield d.connect(Object.assign({deviceId:n},t))}))})()}createBond(n){var e=this;return(0,c.Z)(function*(){yield e.queue((0,c.Z)(function*(){yield d.createBond({deviceId:n})}))})()}isBonded(n){var e=this;return(0,c.Z)(function*(){return yield e.queue((0,c.Z)(function*(){return(yield d.isBonded({deviceId:n})).value}))})()}disconnect(n){var e=this;return(0,c.Z)(function*(){yield e.queue((0,c.Z)(function*(){yield d.disconnect({deviceId:n})}))})()}getServices(n){var e=this;return(0,c.Z)(function*(){return yield e.queue((0,c.Z)(function*(){return(yield d.getServices({deviceId:n})).services}))})()}discoverServices(n){var e=this;return(0,c.Z)(function*(){yield e.queue((0,c.Z)(function*(){yield d.discoverServices({deviceId:n})}))})()}getMtu(n){var e=this;return(0,c.Z)(function*(){return yield e.queue((0,c.Z)(function*(){return(yield d.getMtu({deviceId:n})).value}))})()}requestConnectionPriority(n,e){var t=this;return(0,c.Z)(function*(){yield t.queue((0,c.Z)(function*(){yield d.requestConnectionPriority({deviceId:n,connectionPriority:e})}))})()}readRssi(n){var e=this;return(0,c.Z)(function*(){return yield e.queue((0,c.Z)(function*(){const r=yield d.readRssi({deviceId:n});return parseFloat(r.value)}))})()}read(n,e,t,r){var a=this;return(0,c.Z)(function*(){return e=f(e),t=f(t),yield a.queue((0,c.Z)(function*(){const l=yield d.read(Object.assign({deviceId:n,service:e,characteristic:t},r));return a.convertValue(l.value)}))})()}write(n,e,t,r,a){var s=this;return(0,c.Z)(function*(){return e=f(e),t=f(t),s.queue((0,c.Z)(function*(){if(null==r||!r.buffer)throw new Error("Invalid data.");let l=r;"web"!==w.dV.getPlatform()&&(l=(0,O.FF)(r)),yield d.write(Object.assign({deviceId:n,service:e,characteristic:t,value:l},a))}))})()}writeWithoutResponse(n,e,t,r,a){var s=this;return(0,c.Z)(function*(){e=f(e),t=f(t),yield s.queue((0,c.Z)(function*(){if(null==r||!r.buffer)throw new Error("Invalid data.");let l=r;"web"!==w.dV.getPlatform()&&(l=(0,O.FF)(r)),yield d.writeWithoutResponse(Object.assign({deviceId:n,service:e,characteristic:t,value:l},a))}))})()}readDescriptor(n,e,t,r,a){var s=this;return(0,c.Z)(function*(){return e=f(e),t=f(t),r=f(r),yield s.queue((0,c.Z)(function*(){const g=yield d.readDescriptor(Object.assign({deviceId:n,service:e,characteristic:t,descriptor:r},a));return s.convertValue(g.value)}))})()}writeDescriptor(n,e,t,r,a,s){var l=this;return(0,c.Z)(function*(){return e=f(e),t=f(t),r=f(r),l.queue((0,c.Z)(function*(){if(null==a||!a.buffer)throw new Error("Invalid data.");let g=a;"web"!==w.dV.getPlatform()&&(g=(0,O.FF)(a)),yield d.writeDescriptor(Object.assign({deviceId:n,service:e,characteristic:t,descriptor:r,value:g},s))}))})()}startNotifications(n,e,t,r){var a=this;return(0,c.Z)(function*(){e=f(e),t=f(t),yield a.queue((0,c.Z)(function*(){var s;const l=`notification|${n}|${e}|${t}`;yield null===(s=a.eventListeners.get(l))||void 0===s?void 0:s.remove();const g=yield d.addListener(l,x=>{r(a.convertValue(null==x?void 0:x.value))});a.eventListeners.set(l,g),yield d.startNotifications({deviceId:n,service:e,characteristic:t})}))})()}stopNotifications(n,e,t){var r=this;return(0,c.Z)(function*(){e=f(e),t=f(t),yield r.queue((0,c.Z)(function*(){var a;const s=`notification|${n}|${e}|${t}`;yield null===(a=r.eventListeners.get(s))||void 0===a?void 0:a.remove(),r.eventListeners.delete(s),yield d.stopNotifications({deviceId:n,service:e,characteristic:t})}))})()}validateRequestBleDeviceOptions(n){return n.services&&(n.services=n.services.map(f)),n.optionalServices&&(n.optionalServices=n.optionalServices.map(f)),n}convertValue(n){return"string"==typeof n?(0,O._j)(n):void 0===n?new DataView(new ArrayBuffer(0)):n}convertObject(n){if(void 0===n)return;const e={};for(const t of Object.keys(n))e[t]=this.convertValue(n[t]);return e}};var p=b(7579),M=b(2076);const G=(0,w.fo)("Preferences",{web:()=>b.e(8359).then(b.bind(b,8359)).then(i=>new i.PreferencesWeb)});let A=(()=>{class i{constructor(e){this.ngZone=e,this.statusMessage="",this.isReconnecting=!1,this.reconnectCount=0,this.reconnectThreshold=5,this._deviceId=new p.x,this._connection=new p.x,this._bleEnabled=new p.x,this._recordingState=new p.x,this._device=new p.x,this._mapData=new p.x,this._gestData=new p.x,this._accelData=new p.x,this._gyroData=new p.x,this._magData=new p.x,this._tempData=new p.x,this._humData=new p.x,this._proxData=new p.x,this.isConnected=!1,this.isConnecting=!1,this.initialize()}get bleEnabledObs(){return this._bleEnabled.asObservable()}get connectionData(){return this._connection.asObservable()}get deviceId(){return this._deviceId.asObservable()}get device(){return this._device.asObservable()}get mapData(){return this._mapData.asObservable()}get gestData(){return this._gestData.asObservable()}get accelData(){return this._accelData.asObservable()}get magData(){return this._magData.asObservable()}get gyroData(){return this._gyroData.asObservable()}get tempData(){return this._tempData.asObservable()}get humData(){return this._humData.asObservable()}get proxData(){return this._proxData.asObservable()}get recordingState(){return this._recordingState.asObservable()}initialize(){try{v.initialize().then(e=>{this._bleEnabled.next(!0)},e=>{this._bleEnabled.next(!1)})}catch(e){console.log("BLE INITIALIZE ERROR:",e)}}stopScan(){try{v.stopLEScan()}catch(e){console.log("BLE DEINITIALIZE ERROR:",e)}}checkBluetooth(){return v.isEnabled()}disconnectDevice(e){return v.disconnect(e)}requestDevice(){return v.requestDevice({services:["19B10010-E8F2-537E-4F6C-D104768A1214","19B10009-E8F2-537E-4F6C-D104768A1214","19B10008-E8F2-537E-4F6C-D104768A1214"]}).then(e=>{console.log("DEVICE ID:",e),this.onConnectDevice(e.deviceId)}).catch(e=>{console.log("ERROR requestDevice():",e)}).catch(e=>{console.log("ERROR requestDevice():",e)})}removeDevice(){G.remove({key:"bluetooth_device"})}autoConnect(){return(0,M.D)(G.get({key:"bluetooth_device"})).pipe((0,D.U)(e=>(console.log("Stored Data:",e),e&&e.value?e.value:null)))}listDevices(){this.setStatus("Scanning for bluetooth LE devices"),v.requestLEScan({},e=>{this.onDeviceDiscovered(e)}),setTimeout(()=>{v.stopLEScan()},1e4)}onConnectDevice(e){var t=this;if(G.set({key:"bluetooth_device",value:e}),this._deviceId.next(e),"ios"===w.dV.getPlatform()&&(v.requestLEScan({},r=>{this.onDeviceDiscovered(r)}),setTimeout((0,c.Z)(function*(){v.stopLEScan();try{t.isConnecting||(yield t.tryConnect(e))}catch(r){console.log("ERROR onConnectDevice():",r)}}),1e4)),"android"===w.dV.getPlatform()||"web"===w.dV.getPlatform())try{v.disconnect(e).then(function(){var r=(0,c.Z)(function*(a){console.log("DEVICE DISCONNECTED:",e),t.isConnecting||(yield t.tryConnect(e))});return function(a){return r.apply(this,arguments)}}(),r=>{this._connection.next(!1),this.isConnected=!1})}catch(r){console.log("BLE CONNECTING ERROR:",r),this._connection.next(!1),this.isConnected=!1}}tryConnect(e){this.isConnecting=!0,console.log("DEVICE CONNECTING:",e);try{v.connect(e,t=>{this._connection.next(!1),this.isConnected=!1,console.log("DEVICE DISCONNECTED:",e,"---",(new Date).toISOString())}).then(t=>(console.log("SUCCESS DEVICE CONNECTED:",e),this.isReconnecting=!1,this._connection.next(!0),this.isConnected=!0,this.reconnectCount=0,this.isConnecting=!1,e),t=>{console.log("DEVICE CONNECTION FAILURE IN SCAN:",t,e,"---",(new Date).toISOString()),this.reconnectCount+=1,this.onConnectDevice(e)})}catch(t){console.log("BLE CONNECTING ERROR:",t)}}onGestureNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parsDataReading(l),a._gestData.next(s)})})()}accelNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parseSensorDataReading(l),a._accelData.next(s)})})()}magNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parseSensorDataReading(l),a._magData.next(s)})})()}gyroNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parseSensorDataReading(l),a._gyroData.next(s)})})()}tempNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parseSensorDataReading(l),a._tempData.next(s)})})()}humNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parseSensorDataReading(l),a._humData.next(s)})})()}proxNotifyData(e,t,r){var a=this;return(0,c.Z)(function*(){let s;yield v.startNotifications(e,t,r,l=>{s=a.parsDataReading(l),a._proxData.next(s[0])})})()}parseIntReading(e){return e.getUint16(0)}parsDataReading(e){const t=[],r=e.byteLength;for(let a=0;a<r;a++){const s=e.getUint8(a);t.push(s)}return t}parseSensorDataReading(e){return new Float32Array(e.buffer)}onReadData(e,t,r){var a=this;return(0,c.Z)(function*(){yield v.read(e,t,r).then(s=>{s.byteLength>0&&a._mapData.next(s)},s=>{console.log("Read BT data error:"+s),s.message.includes("Not connected")&&(a.isReconnecting||(console.log("RECONNECTING TO",e),a.isReconnecting=!0,a._connection.next(!1),a.isConnected=!1,a.onConnectDevice(e)))}).finally(()=>{})})()}onDeviceDiscovered(e){this.ngZone.run(()=>{this._device.next(e)})}setStatus(e){this.ngZone.run(()=>{this.statusMessage=e})}initializeBluetooth(){v||this.initialize(),this.checkBluetooth().then(e=>{e||alert("Bluetooth Error, Bluetooth is not enabled, turn bluetooth on to continue")},e=>{alert(e)}),!this.isConnected&&!this.isConnecting&&this.autoConnect().pipe((0,D.U)(e=>{e?(console.log("auto connect"),this.onConnectDevice(e),this._deviceId.next(e)):this.requestDevice()})).subscribe()}onNewBluetooth(){this.removeDevice(),this.deviceId.pipe((0,h.q)(1)).subscribe(e=>{e&&this.initializeBluetooth()})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(o.R0b))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$=(()=>{class i{constructor(e){this.bluetoothService=e,this.datasets=[{data:[],fill:!1,label:"X",pointRadius:0},{data:[],fill:!1,label:"Y",pointRadius:0},{data:[],fill:!1,label:"Z",pointRadius:0}],this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&(console.log("connected starting notification",t),this.bluetoothService.accelNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10011-E8F2-537E-4F6C-D104768A1214"))})).subscribe(),this.bluetoothService.accelData.subscribe(t=>{this.datasets[0].data.push({x:Date.now(),y:t[0]}),this.datasets[1].data.push({x:Date.now(),y:t[1]}),this.datasets[2].data.push({x:Date.now(),y:t[2]})})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),re=(()=>{class i{constructor(e){this.bluetoothService=e,this.datasets=[{data:[],fill:!1,label:"X",pointRadius:0},{data:[],fill:!1,label:"Y",pointRadius:0},{data:[],fill:!1,label:"Z",pointRadius:0}],this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&this.bluetoothService.gyroNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10012-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.gyroData.subscribe(t=>{this.datasets[0].data.push({x:Date.now(),y:t[0]}),this.datasets[1].data.push({x:Date.now(),y:t[1]}),this.datasets[2].data.push({x:Date.now(),y:t[2]})})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),V=(()=>{class i{constructor(e){this.bluetoothService=e,this.datasets=[{data:[],fill:!1,label:"X",pointRadius:0},{data:[],fill:!1,label:"Y",pointRadius:0},{data:[],fill:!1,label:"Z",pointRadius:0}],this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&this.bluetoothService.magNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10013-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.magData.subscribe(t=>{this.datasets[0].data.push({x:Date.now(),y:t[0]}),this.datasets[1].data.push({x:Date.now(),y:t[1]}),this.datasets[2].data.push({x:Date.now(),y:t[2]})})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),W=(()=>{class i{constructor(e){this.bluetoothService=e,this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&this.bluetoothService.tempNotifyData(this.deviceId,"19B10009-E8F2-537E-4F6C-D104768A1214","19B10017-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.tempData.subscribe(t=>{this.temperature=t[0]})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),J=(()=>{class i{constructor(e){this.bluetoothService=e,this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&this.bluetoothService.humNotifyData(this.deviceId,"19B10009-E8F2-537E-4F6C-D104768A1214","19B10016-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.humData.subscribe(t=>{this.humidity=t[0]})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oe=(()=>{class i{constructor(e){this.bluetoothService=e,this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&this.bluetoothService.onGestureNotifyData(this.deviceId,"19B10008-E8F2-537E-4F6C-D104768A1214","19B10014-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.gestData.subscribe(t=>{console.log("notify data",t);const r=t[0];0===r&&(this.gesture="up"),1===r&&(this.gesture="down"),2===r&&(this.gesture="left"),3===r&&(this.gesture="right")})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),K=(()=>{class i{constructor(e){this.bluetoothService=e,this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(t=>{this.isConnected=t,t&&this.bluetoothService.proxNotifyData(this.deviceId,"19B10008-E8F2-537E-4F6C-D104768A1214","19B10015-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.proxData.subscribe(t=>{this.proximity=t})}}return i.\u0275fac=function(e){return new(e||i)(o.LFG(A))},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var z=b(6895),R=b(650),Q=b(7449);function X(i,n){if(1&i){const e=o.EpF();o.TgZ(0,"div")(1,"ion-button",3),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return o.KtG(r.webScan())}),o._uU(2,"Connect"),o.qZA()()}}function se(i,n){1&i&&(o.TgZ(0,"div")(1,"ion-badge",4),o._uU(2,"Connected"),o.qZA()())}let u=(()=>{class i{constructor(e,t,r,a,s,l,g,x){this.bluetoothService=e,this.accelService=t,this.gyroService=r,this.magService=a,this.tempService=s,this.humService=l,this.gestService=g,this.proxService=x,this.isConnected=!1,this.deviceId="",this.direction=""}ngOnInit(){this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,D.U)(e=>{this.isConnected=e})).subscribe()}convertCtoF(e){return 9*e/5+32}ngOnDestroy(){this.gestureSub&&this.gestureSub.unsubscribe()}webScan(){this.bluetoothService.onNewBluetooth(),this.bluetoothService.initializeBluetooth()}disconnect(){this.bluetoothService.onNewBluetooth()}}return i.\u0275fac=function(e){return new(e||i)(o.Y36(A),o.Y36($),o.Y36(re),o.Y36(V),o.Y36(W),o.Y36(J),o.Y36(oe),o.Y36(K))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-explore-container"]],inputs:{name:"name"},decls:51,vars:19,consts:[["id","container"],[4,"ngIf"],[3,"datasets"],["expand","block",3,"click"],["color","success"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,X,3,0,"div",1),o.YNc(2,se,3,0,"div",1),o.TgZ(3,"ion-grid")(4,"ion-row")(5,"ion-col")(6,"h2"),o._uU(7,"Temp"),o.qZA(),o.TgZ(8,"div")(9,"strong"),o._uU(10),o.ALo(11,"number"),o.qZA()(),o.TgZ(12,"div")(13,"strong"),o._uU(14),o.ALo(15,"number"),o.qZA()()(),o.TgZ(16,"ion-col")(17,"h2"),o._uU(18,"Humidity"),o.qZA(),o.TgZ(19,"div")(20,"strong"),o._uU(21),o.ALo(22,"number"),o.qZA()()()(),o.TgZ(23,"ion-row")(24,"ion-col")(25,"h2"),o._uU(26,"Gesture"),o.qZA(),o.TgZ(27,"div")(28,"strong"),o._uU(29),o.qZA()()(),o.TgZ(30,"ion-col")(31,"h2"),o._uU(32,"Proximity"),o.qZA(),o.TgZ(33,"div")(34,"strong"),o._uU(35),o.qZA()()()()(),o.TgZ(36,"h2"),o._uU(37,"Accelerometer"),o.qZA(),o.TgZ(38,"div"),o._UZ(39,"app-accelerometer",2),o.qZA(),o.TgZ(40,"h2"),o._uU(41,"Gyroscope"),o.qZA(),o.TgZ(42,"div"),o._UZ(43,"app-accelerometer",2),o.qZA(),o.TgZ(44,"h2"),o._uU(45,"Magnetometer"),o.qZA(),o.TgZ(46,"div"),o._UZ(47,"app-accelerometer",2),o.qZA(),o.TgZ(48,"div")(49,"ion-button",3),o.NdJ("click",function(){return t.disconnect()}),o._uU(50,"Disconnect"),o.qZA()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",!t.isConnected),o.xp6(1),o.Q6J("ngIf",t.isConnected),o.xp6(8),o.hij("",o.xi3(11,10,t.convertCtoF(t.tempService.temperature),"1.2-2")," \xb0F"),o.xp6(4),o.hij("",o.xi3(15,13,t.tempService.temperature,"1.2-2")," \xb0C"),o.xp6(7),o.hij("",o.xi3(22,16,t.humService.humidity,"1.2-2"),"%"),o.xp6(8),o.Oqu(t.gestService.gesture),o.xp6(6),o.Oqu(t.proxService.proximity),o.xp6(4),o.Q6J("datasets",t.accelService.datasets),o.xp6(4),o.Q6J("datasets",t.gyroService.datasets),o.xp6(4),o.Q6J("datasets",t.magService.datasets))},dependencies:[z.O5,R.yp,R.YG,R.wI,R.jY,R.Nd,Q.P,z.JJ],styles:["#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;padding-bottom:10%}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),i})()},314:(H,F,b)=>{b.d(F,{e:()=>O});var h=b(6895),D=b(433),o=b(650),c=b(5732),w=b(8256);let O=(()=>{class d{}return d.\u0275fac=function(Z){return new(Z||d)},d.\u0275mod=w.oAB({type:d}),d.\u0275inj=w.cJS({imports:[h.ez,D.u5,o.Pc,c.b]}),d})()}}]);