"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8149],{4449:(Y,I,g)=>{function x(f){return function h(f){return new DataView(Uint8Array.from(f).buffer)}(f.trim().split(" ").filter(v=>""!==v).map(v=>parseInt(v,16)))}function d(f){return function E(f){return Array.from(new Uint8Array(f.buffer))}(f).map(Z=>{let v=Z.toString(16);return 1==v.length&&(v="0"+v),v}).join(" ")}function S(f){if("string"==typeof f)return f;if("number"==typeof f)return function _(f){return`0000${f.toString(16).padStart(4,"0")}-0000-1000-8000-00805f9b34fb`}(f);throw new Error("Invalid UUID")}function P(f){const Z={};if(f)return f.forEach((v,m)=>{Z[m.toString()]=v}),Z}g.d(I,{FF:()=>d,GA:()=>P,JA:()=>S,_j:()=>x})},7423:(Y,I,g)=>{g.d(I,{Uw:()=>$,dV:()=>m,fo:()=>M});var h=g(5861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var S=(()=>{return(n=S||(S={})).Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",S;var n})();class P extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const Z=n=>{var e,t,i,r,s;const l=n.CapacitorCustomPlatform||null,u=n.Capacitor||{},p=u.Plugins=u.Plugins||{},b=n.CapacitorPlatforms,N=(null===(e=null==b?void 0:b.currentPlatform)||void 0===e?void 0:e.getPlatform)||(()=>null!==l?l.name:(n=>{var e,t;return null!=n&&n.androidBridge?"android":null!==(t=null===(e=null==n?void 0:n.webkit)||void 0===e?void 0:e.messageHandlers)&&void 0!==t&&t.bridge?"ios":"web"})(n)),ue=(null===(t=null==b?void 0:b.currentPlatform)||void 0===t?void 0:t.isNativePlatform)||(()=>"web"!==N()),fe=(null===(i=null==b?void 0:b.currentPlatform)||void 0===i?void 0:i.isPluginAvailable)||(y=>{const C=ie.get(y);return!!(null!=C&&C.platforms.has(N())||ae(y))}),ae=(null===(r=null==b?void 0:b.currentPlatform)||void 0===r?void 0:r.getPluginHeader)||(y=>{var C;return null===(C=u.PluginHeaders)||void 0===C?void 0:C.find(j=>j.name===y)}),ie=new Map,pe=(null===(s=null==b?void 0:b.currentPlatform)||void 0===s?void 0:s.registerPlugin)||((y,C={})=>{const j=ie.get(y);if(j)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),j.proxy;const F=N(),k=ae(y);let A;const me=function(){var D=(0,h.Z)(function*(){return!A&&F in C?A=A="function"==typeof C[F]?yield C[F]():C[F]:null!==l&&!A&&"web"in C&&(A=A="function"==typeof C.web?yield C.web():C.web),A});return function(){return D.apply(this,arguments)}}(),re=D=>{let w;const O=(...T)=>{const U=me().then(L=>{const q=((D,w)=>{var O,T;if(!k){if(D)return null===(T=D[w])||void 0===T?void 0:T.bind(D);throw new P(`"${y}" plugin is not implemented on ${F}`,S.Unimplemented)}{const U=null==k?void 0:k.methods.find(L=>w===L.name);if(U)return"promise"===U.rtype?L=>u.nativePromise(y,w.toString(),L):(L,q)=>u.nativeCallback(y,w.toString(),L,q);if(D)return null===(O=D[w])||void 0===O?void 0:O.bind(D)}})(L,D);if(q){const H=q(...T);return w=null==H?void 0:H.remove,H}throw new P(`"${y}.${D}()" is not implemented on ${F}`,S.Unimplemented)});return"addListener"===D&&(U.remove=(0,h.Z)(function*(){return w()})),U};return O.toString=()=>`${D.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:D,writable:!1,configurable:!1}),O},ce=re("addListener"),le=re("removeListener"),Ce=(D,w)=>{const O=ce({eventName:D},w),T=function(){var L=(0,h.Z)(function*(){const q=yield O;le({eventName:D,callbackId:q},w)});return function(){return L.apply(this,arguments)}}(),U=new Promise(L=>O.then(()=>L({remove:T})));return U.remove=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield T()}),U},oe=new Proxy({},{get(D,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?Ce:ce;case"removeListener":return le;default:return re(w)}}});return p[y]=oe,ie.set(y,{name:y,proxy:oe,platforms:new Set([...Object.keys(C),...k?[F]:[]])}),oe});return u.convertFileSrc||(u.convertFileSrc=y=>y),u.getPlatform=N,u.handleError=y=>n.console.error(y),u.isNativePlatform=ue,u.isPluginAvailable=fe,u.pluginMethodNoop=(y,C,j)=>Promise.reject(`${j} does not have an implementation of "${C}".`),u.registerPlugin=pe,u.Exception=P,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u.platform=u.getPlatform(),u.isNative=u.isNativePlatform(),u},m=(n=>n.Capacitor=Z(n))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),M=m.registerPlugin;class ${constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){var i=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const l=function(){var p=(0,h.Z)(function*(){return i.removeListener(e,t)});return function(){return p.apply(this,arguments)}}(),u=Promise.resolve({remove:l});return Object.defineProperty(u,"remove",{value:(p=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield l()}),function(){return p.apply(this,arguments)})}),u;var p}removeAllListeners(){var e=this;return(0,h.Z)(function*(){e.listeners={};for(const t in e.windowListeners)e.removeWindowListener(e.windowListeners[t]);e.windowListeners={}})()}notifyListeners(e,t){const i=this.listeners[e];i&&i.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new m.Exception(e,S.Unimplemented)}unavailable(e="not available"){return new m.Exception(e,S.Unavailable)}removeListener(e,t){var i=this;return(0,h.Z)(function*(){const r=i.listeners[e];if(!r)return;const s=r.indexOf(t);i.listeners[e].splice(s,1),i.listeners[e].length||i.removeWindowListener(i.windowListeners[e])})()}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const G=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),W=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class J extends ${getCookies(){return(0,h.Z)(function*(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[r,s]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=W(r).trim(),s=W(s).trim(),t[r]=s}),t})()}setCookie(e){return(0,h.Z)(function*(){try{const t=G(e.key),i=G(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),l=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${r}; path=${s}; ${l};`}catch(t){return Promise.reject(t)}})()}deleteCookie(e){return(0,h.Z)(function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})()}clearCookies(){return(0,h.Z)(function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})()}clearAllCookies(){var e=this;return(0,h.Z)(function*(){try{yield e.clearCookies()}catch(t){return Promise.reject(t)}})()}}M("CapacitorCookies",{web:()=>new J});const B=function(){var n=(0,h.Z)(function*(e){return new Promise((t,i)=>{const r=new FileReader;r.onload=()=>{const s=r.result;t(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>i(s),r.readAsDataURL(e)})});return function(t){return n.apply(this,arguments)}}();class te extends ${request(e){return(0,h.Z)(function*(){const t=((n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),r=((n={})=>{const e=Object.keys(n);return Object.keys(n).map(r=>r.toLocaleLowerCase()).reduce((r,s,l)=>(r[s]=n[e[l]],r),{})})(n.headers)["content-type"]||"";if("string"==typeof n.data)t.body=n.data;else if(r.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[l,u]of Object.entries(n.data||{}))s.set(l,u);t.body=s.toString()}else if(r.includes("multipart/form-data")){const s=new FormData;if(n.data instanceof FormData)n.data.forEach((u,p)=>{s.append(p,u)});else for(const u of Object.keys(n.data))s.append(u,n.data[u]);t.body=s;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(r.includes("application/json")||"object"==typeof n.data)&&(t.body=JSON.stringify(n.data));return t})(e,e.webFetchExtra),i=((n,e=!0)=>n?Object.entries(n).reduce((i,r)=>{const[s,l]=r;let u,p;return Array.isArray(l)?(p="",l.forEach(b=>{u=e?encodeURIComponent(b):b,p+=`${s}=${u}&`}),p.slice(0,-1)):(u=e?encodeURIComponent(l):l,p=`${s}=${u}`),`${i}&${p}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=i?`${e.url}?${i}`:e.url,s=yield fetch(r,t),l=s.headers.get("content-type")||"";let p,b,{responseType:u="text"}=s.ok?e:{};switch(l.includes("application/json")&&(u="json"),u){case"arraybuffer":case"blob":b=yield s.blob(),p=yield B(b);break;case"json":p=yield s.json();break;default:p=yield s.text()}const z={};return s.headers.forEach((N,ne)=>{z[ne]=N}),{data:p,headers:z,status:s.status,url:s.url}})()}get(e){var t=this;return(0,h.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"GET"}))})()}post(e){var t=this;return(0,h.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"POST"}))})()}put(e){var t=this;return(0,h.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PUT"}))})()}patch(e){var t=this;return(0,h.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})()}delete(e){var t=this;return(0,h.Z)(function*(){return t.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})()}}M("CapacitorHttp",{web:()=>new te})},4774:(Y,I,g)=>{g.d(I,{Z:()=>te});var h=g(5698),E=g(4004),o=g(8256),a=g(5861),_=g(7423),x=g(4449);const d=(0,_.fo)("BluetoothLe",{web:()=>g.e(2728).then(g.bind(g,2728)).then(c=>new c.BluetoothLeWeb)}),S=()=>{let c=Promise.resolve();return n=>new Promise((e,t)=>{c=c.then(()=>n()).then(e).catch(t)})};function P(c){return c?S():n=>n()}function f(c){if("string"!=typeof c)throw new Error(`Invalid UUID type ${typeof c}. Expected string.`);if(!((c=c.toLowerCase()).search(/^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$/)>=0))throw new Error(`Invalid UUID format ${c}. Expected 128 bit string (e.g. "0000180d-0000-1000-8000-00805f9b34fb").`);return c}const v=new class Z{constructor(){this.scanListener=null,this.eventListeners=new Map,this.queue=P(!0)}enableQueue(){this.queue=P(!0)}disableQueue(){this.queue=P(!1)}initialize(n){var e=this;return(0,a.Z)(function*(){yield e.queue((0,a.Z)(function*(){yield d.initialize(n)}))})()}getEnabled(){var n=this;return(0,a.Z)(function*(){return n.isEnabled()})()}isEnabled(){var n=this;return(0,a.Z)(function*(){return yield n.queue((0,a.Z)(function*(){return(yield d.isEnabled()).value}))})()}enable(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){yield d.enable()}))})()}disable(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){yield d.disable()}))})()}startEnabledNotifications(n){var e=this;return(0,a.Z)(function*(){yield e.queue((0,a.Z)(function*(){var t;const i="onEnabledChanged";yield null===(t=e.eventListeners.get(i))||void 0===t?void 0:t.remove();const r=yield d.addListener(i,s=>{n(s.value)});e.eventListeners.set(i,r),yield d.startEnabledNotifications()}))})()}stopEnabledNotifications(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){var e;const t="onEnabledChanged";yield null===(e=n.eventListeners.get(t))||void 0===e?void 0:e.remove(),n.eventListeners.delete(t),yield d.stopEnabledNotifications()}))})()}isLocationEnabled(){var n=this;return(0,a.Z)(function*(){return yield n.queue((0,a.Z)(function*(){return(yield d.isLocationEnabled()).value}))})()}openLocationSettings(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){yield d.openLocationSettings()}))})()}openBluetoothSettings(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){yield d.openBluetoothSettings()}))})()}openAppSettings(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){yield d.openAppSettings()}))})()}setDisplayStrings(n){var e=this;return(0,a.Z)(function*(){yield e.queue((0,a.Z)(function*(){yield d.setDisplayStrings(n)}))})()}requestDevice(n){var e=this;return(0,a.Z)(function*(){return n=n?e.validateRequestBleDeviceOptions(n):void 0,yield e.queue((0,a.Z)(function*(){return yield d.requestDevice(n)}))})()}requestLEScan(n,e){var t=this;return(0,a.Z)(function*(){n=t.validateRequestBleDeviceOptions(n),yield t.queue((0,a.Z)(function*(){var i;yield null===(i=t.scanListener)||void 0===i?void 0:i.remove(),t.scanListener=yield d.addListener("onScanResult",r=>{const s=Object.assign(Object.assign({},r),{manufacturerData:t.convertObject(r.manufacturerData),serviceData:t.convertObject(r.serviceData),rawAdvertisement:r.rawAdvertisement?t.convertValue(r.rawAdvertisement):void 0});e(s)}),yield d.requestLEScan(n)}))})()}stopLEScan(){var n=this;return(0,a.Z)(function*(){yield n.queue((0,a.Z)(function*(){var e;yield null===(e=n.scanListener)||void 0===e?void 0:e.remove(),n.scanListener=null,yield d.stopLEScan()}))})()}getDevices(n){var e=this;return(0,a.Z)(function*(){return e.queue((0,a.Z)(function*(){return(yield d.getDevices({deviceIds:n})).devices}))})()}getConnectedDevices(n){var e=this;return(0,a.Z)(function*(){if(!Array.isArray(n))throw new Error("services must be an array");return n=n.map(f),e.queue((0,a.Z)(function*(){return(yield d.getConnectedDevices({services:n})).devices}))})()}connect(n,e,t){var i=this;return(0,a.Z)(function*(){yield i.queue((0,a.Z)(function*(){var r;if(e){const s=`disconnected|${n}`;yield null===(r=i.eventListeners.get(s))||void 0===r?void 0:r.remove();const l=yield d.addListener(s,()=>{e(n)});i.eventListeners.set(s,l)}yield d.connect(Object.assign({deviceId:n},t))}))})()}createBond(n){var e=this;return(0,a.Z)(function*(){yield e.queue((0,a.Z)(function*(){yield d.createBond({deviceId:n})}))})()}isBonded(n){var e=this;return(0,a.Z)(function*(){return yield e.queue((0,a.Z)(function*(){return(yield d.isBonded({deviceId:n})).value}))})()}disconnect(n){var e=this;return(0,a.Z)(function*(){yield e.queue((0,a.Z)(function*(){yield d.disconnect({deviceId:n})}))})()}getServices(n){var e=this;return(0,a.Z)(function*(){return yield e.queue((0,a.Z)(function*(){return(yield d.getServices({deviceId:n})).services}))})()}discoverServices(n){var e=this;return(0,a.Z)(function*(){yield e.queue((0,a.Z)(function*(){yield d.discoverServices({deviceId:n})}))})()}getMtu(n){var e=this;return(0,a.Z)(function*(){return yield e.queue((0,a.Z)(function*(){return(yield d.getMtu({deviceId:n})).value}))})()}requestConnectionPriority(n,e){var t=this;return(0,a.Z)(function*(){yield t.queue((0,a.Z)(function*(){yield d.requestConnectionPriority({deviceId:n,connectionPriority:e})}))})()}readRssi(n){var e=this;return(0,a.Z)(function*(){return yield e.queue((0,a.Z)(function*(){const i=yield d.readRssi({deviceId:n});return parseFloat(i.value)}))})()}read(n,e,t,i){var r=this;return(0,a.Z)(function*(){return e=f(e),t=f(t),yield r.queue((0,a.Z)(function*(){const l=yield d.read(Object.assign({deviceId:n,service:e,characteristic:t},i));return r.convertValue(l.value)}))})()}write(n,e,t,i,r){var s=this;return(0,a.Z)(function*(){return e=f(e),t=f(t),s.queue((0,a.Z)(function*(){if(null==i||!i.buffer)throw new Error("Invalid data.");let l=i;"web"!==_.dV.getPlatform()&&(l=(0,x.FF)(i)),yield d.write(Object.assign({deviceId:n,service:e,characteristic:t,value:l},r))}))})()}writeWithoutResponse(n,e,t,i,r){var s=this;return(0,a.Z)(function*(){e=f(e),t=f(t),yield s.queue((0,a.Z)(function*(){if(null==i||!i.buffer)throw new Error("Invalid data.");let l=i;"web"!==_.dV.getPlatform()&&(l=(0,x.FF)(i)),yield d.writeWithoutResponse(Object.assign({deviceId:n,service:e,characteristic:t,value:l},r))}))})()}readDescriptor(n,e,t,i,r){var s=this;return(0,a.Z)(function*(){return e=f(e),t=f(t),i=f(i),yield s.queue((0,a.Z)(function*(){const u=yield d.readDescriptor(Object.assign({deviceId:n,service:e,characteristic:t,descriptor:i},r));return s.convertValue(u.value)}))})()}writeDescriptor(n,e,t,i,r,s){var l=this;return(0,a.Z)(function*(){return e=f(e),t=f(t),i=f(i),l.queue((0,a.Z)(function*(){if(null==r||!r.buffer)throw new Error("Invalid data.");let u=r;"web"!==_.dV.getPlatform()&&(u=(0,x.FF)(r)),yield d.writeDescriptor(Object.assign({deviceId:n,service:e,characteristic:t,descriptor:i,value:u},s))}))})()}startNotifications(n,e,t,i){var r=this;return(0,a.Z)(function*(){e=f(e),t=f(t),yield r.queue((0,a.Z)(function*(){var s;const l=`notification|${n}|${e}|${t}`;yield null===(s=r.eventListeners.get(l))||void 0===s?void 0:s.remove();const u=yield d.addListener(l,p=>{i(r.convertValue(null==p?void 0:p.value))});r.eventListeners.set(l,u),yield d.startNotifications({deviceId:n,service:e,characteristic:t})}))})()}stopNotifications(n,e,t){var i=this;return(0,a.Z)(function*(){e=f(e),t=f(t),yield i.queue((0,a.Z)(function*(){var r;const s=`notification|${n}|${e}|${t}`;yield null===(r=i.eventListeners.get(s))||void 0===r?void 0:r.remove(),i.eventListeners.delete(s),yield d.stopNotifications({deviceId:n,service:e,characteristic:t})}))})()}validateRequestBleDeviceOptions(n){return n.services&&(n.services=n.services.map(f)),n.optionalServices&&(n.optionalServices=n.optionalServices.map(f)),n}convertValue(n){return"string"==typeof n?(0,x._j)(n):void 0===n?new DataView(new ArrayBuffer(0)):n}convertObject(n){if(void 0===n)return;const e={};for(const t of Object.keys(n))e[t]=this.convertValue(n[t]);return e}};var m=g(7579),M=g(2076);const V=(0,_.fo)("Preferences",{web:()=>g.e(8359).then(g.bind(g,8359)).then(c=>new c.PreferencesWeb)});let R=(()=>{class c{constructor(e){this.ngZone=e,this.statusMessage="",this.isReconnecting=!1,this.reconnectCount=0,this.reconnectThreshold=5,this._deviceId=new m.x,this._connection=new m.x,this._bleEnabled=new m.x,this._recordingState=new m.x,this._device=new m.x,this._mapData=new m.x,this._notifyData=new m.x,this._accelData=new m.x,this._gyroData=new m.x,this._magData=new m.x,this._tempData=new m.x,this._humData=new m.x,this.isConnected=!1,this.isConnecting=!1,this.initialize()}get bleEnabledObs(){return this._bleEnabled.asObservable()}get connectionData(){return this._connection.asObservable()}get deviceId(){return this._deviceId.asObservable()}get device(){return this._device.asObservable()}get mapData(){return this._mapData.asObservable()}get notifyData(){return this._notifyData.asObservable()}get accelData(){return this._accelData.asObservable()}get magData(){return this._magData.asObservable()}get gyroData(){return this._gyroData.asObservable()}get tempData(){return this._tempData.asObservable()}get humData(){return this._humData.asObservable()}get recordingState(){return this._recordingState.asObservable()}initialize(){try{v.initialize().then(e=>{this._bleEnabled.next(!0)},e=>{this._bleEnabled.next(!1)})}catch(e){console.log("BLE INITIALIZE ERROR:",e)}}stopScan(){try{v.stopLEScan()}catch(e){console.log("BLE DEINITIALIZE ERROR:",e)}}checkBluetooth(){return v.isEnabled()}disconnectDevice(e){return v.disconnect(e)}requestDevice(){return v.requestDevice({services:["19B10010-E8F2-537E-4F6C-D104768A1214","19B10009-E8F2-537E-4F6C-D104768A1214"]}).then(e=>{console.log("DEVICE ID:",e),this.onConnectDevice(e.deviceId)}).catch(e=>{console.log("ERROR requestDevice():",e)}).catch(e=>{console.log("ERROR requestDevice():",e)})}removeDevice(){V.remove({key:"bluetooth_device"})}autoConnect(){return(0,M.D)(V.get({key:"bluetooth_device"})).pipe((0,E.U)(e=>(console.log("Stored Data:",e),e&&e.value?e.value:null)))}listDevices(){this.setStatus("Scanning for bluetooth LE devices"),v.requestLEScan({},e=>{this.onDeviceDiscovered(e)}),setTimeout(()=>{v.stopLEScan()},1e4)}onConnectDevice(e){var t=this;if(V.set({key:"bluetooth_device",value:e}),this._deviceId.next(e),"ios"===_.dV.getPlatform()&&(v.requestLEScan({},i=>{this.onDeviceDiscovered(i)}),setTimeout((0,a.Z)(function*(){v.stopLEScan();try{t.isConnecting||(yield t.tryConnect(e))}catch(i){console.log("ERROR onConnectDevice():",i)}}),1e4)),"android"===_.dV.getPlatform()||"web"===_.dV.getPlatform())try{v.disconnect(e).then(function(){var i=(0,a.Z)(function*(r){console.log("DEVICE DISCONNECTED:",e),t.isConnecting||(yield t.tryConnect(e))});return function(r){return i.apply(this,arguments)}}(),i=>{this._connection.next(!1),this.isConnected=!1})}catch(i){console.log("BLE CONNECTING ERROR:",i),this._connection.next(!1),this.isConnected=!1}}tryConnect(e){this.isConnecting=!0,console.log("DEVICE CONNECTING:",e);try{v.connect(e,t=>{this._connection.next(!1),this.isConnected=!1,console.log("DEVICE DISCONNECTED:",e,"---",(new Date).toISOString())}).then(t=>(console.log("SUCCESS DEVICE CONNECTED:",e),this.isReconnecting=!1,this._connection.next(!0),this.isConnected=!0,this.reconnectCount=0,this.isConnecting=!1,e),t=>{console.log("DEVICE CONNECTION FAILURE IN SCAN:",t,e,"---",(new Date).toISOString()),this.reconnectCount+=1,this.onConnectDevice(e)})}catch(t){console.log("BLE CONNECTING ERROR:",t)}}onGestureNotifyData(e,t,i){var r=this;return(0,a.Z)(function*(){let s;yield v.startNotifications(e,t,i,l=>{s=r.parsDataReading(l),r._notifyData.next(s)})})()}accelNotifyData(e,t,i){var r=this;return(0,a.Z)(function*(){let s;yield v.startNotifications(e,t,i,l=>{s=r.parseSensorDataReading(l),r._accelData.next(s)})})()}magNotifyData(e,t,i){var r=this;return(0,a.Z)(function*(){let s;yield v.startNotifications(e,t,i,l=>{s=r.parseSensorDataReading(l),r._magData.next(s)})})()}gyroNotifyData(e,t,i){var r=this;return(0,a.Z)(function*(){let s;yield v.startNotifications(e,t,i,l=>{s=r.parseSensorDataReading(l),r._gyroData.next(s)})})()}tempNotifyData(e,t,i){var r=this;return(0,a.Z)(function*(){let s;yield v.startNotifications(e,t,i,l=>{console.log("temp raw value",l),s=r.parseSensorDataReading(l),r._tempData.next(s)})})()}humNotifyData(e,t,i){var r=this;return(0,a.Z)(function*(){let s;yield v.startNotifications(e,t,i,l=>{s=r.parseSensorDataReading(l),r._humData.next(s)})})()}parsDataReading(e){const t=[],i=e.byteLength;for(let r=0;r<i;r++){const s=e.getInt8(r);t.push(s)}return t}parseSensorDataReading(e){return new Float32Array(e.buffer)}onReadData(e,t,i){var r=this;return(0,a.Z)(function*(){yield v.read(e,t,i).then(s=>{s.byteLength>0&&r._mapData.next(s)},s=>{console.log("Read BT data error:"+s),s.message.includes("Not connected")&&(r.isReconnecting||(console.log("RECONNECTING TO",e),r.isReconnecting=!0,r._connection.next(!1),r.isConnected=!1,r.onConnectDevice(e)))}).finally(()=>{})})()}onDeviceDiscovered(e){this.ngZone.run(()=>{this._device.next(e)})}setStatus(e){this.ngZone.run(()=>{this.statusMessage=e})}initializeBluetooth(){v||this.initialize(),this.checkBluetooth().then(e=>{e||alert("Bluetooth Error, Bluetooth is not enabled, turn bluetooth on to continue")},e=>{alert(e)}),!this.isConnected&&!this.isConnecting&&this.autoConnect().pipe((0,E.U)(e=>{e?(console.log("auto connect"),this.onConnectDevice(e),this._deviceId.next(e)):this.requestDevice()})).subscribe()}onNewBluetooth(){this.removeDevice(),this.deviceId.pipe((0,h.q)(1)).subscribe(e=>{e&&this.initializeBluetooth()})}}return c.\u0275fac=function(e){return new(e||c)(o.LFG(o.R0b))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),$=(()=>{class c{constructor(e){this.bluetoothService=e,this.datasets=[{data:[],fill:!1,label:"X",pointRadius:0},{data:[],fill:!1,label:"Y",pointRadius:0},{data:[],fill:!1,label:"Z",pointRadius:0}],this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,E.U)(t=>{this.isConnected=t,t&&(console.log("connected starting notification",t),this.bluetoothService.accelNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10011-E8F2-537E-4F6C-D104768A1214"))})).subscribe(),this.bluetoothService.accelData.subscribe(t=>{this.datasets[0].data.push({x:Date.now(),y:t[0]}),this.datasets[1].data.push({x:Date.now(),y:t[1]}),this.datasets[2].data.push({x:Date.now(),y:t[2]})})}}return c.\u0275fac=function(e){return new(e||c)(o.LFG(R))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),se=(()=>{class c{constructor(e){this.bluetoothService=e,this.datasets=[{data:[],fill:!1,label:"X",pointRadius:0},{data:[],fill:!1,label:"Y",pointRadius:0},{data:[],fill:!1,label:"Z",pointRadius:0}],this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,E.U)(t=>{this.isConnected=t,t&&this.bluetoothService.gyroNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10012-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.gyroData.subscribe(t=>{this.datasets[0].data.push({x:Date.now(),y:t[0]}),this.datasets[1].data.push({x:Date.now(),y:t[1]}),this.datasets[2].data.push({x:Date.now(),y:t[2]})})}}return c.\u0275fac=function(e){return new(e||c)(o.LFG(R))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),G=(()=>{class c{constructor(e){this.bluetoothService=e,this.datasets=[{data:[],fill:!1,label:"X",pointRadius:0},{data:[],fill:!1,label:"Y",pointRadius:0},{data:[],fill:!1,label:"Z",pointRadius:0}],this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,E.U)(t=>{this.isConnected=t,t&&this.bluetoothService.magNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10013-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.magData.subscribe(t=>{this.datasets[0].data.push({x:Date.now(),y:t[0]}),this.datasets[1].data.push({x:Date.now(),y:t[1]}),this.datasets[2].data.push({x:Date.now(),y:t[2]})})}}return c.\u0275fac=function(e){return new(e||c)(o.LFG(R))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),W=(()=>{class c{constructor(e){this.bluetoothService=e,this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,E.U)(t=>{this.isConnected=t,t&&this.bluetoothService.tempNotifyData(this.deviceId,"19B10009-E8F2-537E-4F6C-D104768A1214","19B10016-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.tempData.subscribe(t=>{console.log("temp data",t),this.temperature=t[0]})}}return c.\u0275fac=function(e){return new(e||c)(o.LFG(R))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),J=(()=>{class c{constructor(e){this.bluetoothService=e,this.isConnected=!1,this.bluetoothService.deviceId.subscribe(t=>{this.deviceId=t}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,E.U)(t=>{this.isConnected=t,t&&this.bluetoothService.humNotifyData(this.deviceId,"19B10009-E8F2-537E-4F6C-D104768A1214","19B10015-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.bluetoothService.humData.subscribe(t=>{this.humidity=t[0]})}}return c.\u0275fac=function(e){return new(e||c)(o.LFG(R))},c.\u0275prov=o.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var K=g(6895),B=g(650),Q=g(7449);function X(c,n){if(1&c){const e=o.EpF();o.TgZ(0,"div")(1,"ion-button",3),o.NdJ("click",function(){o.CHM(e);const i=o.oxw();return o.KtG(i.webScan())}),o._uU(2,"Connect"),o.qZA()()}}function ee(c,n){1&c&&(o.TgZ(0,"div")(1,"ion-badge",4),o._uU(2,"Connected"),o.qZA()())}let te=(()=>{class c{constructor(e,t,i,r,s,l){this.bluetoothService=e,this.accelService=t,this.gyroService=i,this.magService=r,this.tempService=s,this.humService=l,this.isConnected=!1,this.deviceId="",this.direction=""}ngOnInit(){this.bluetoothService.deviceId.subscribe(e=>{this.deviceId=e}),this.bluetoothService.connectionData.pipe((0,h.q)(1),(0,E.U)(e=>{this.isConnected=e,e&&this.bluetoothService.onGestureNotifyData(this.deviceId,"19B10010-E8F2-537E-4F6C-D104768A1214","19B10014-E8F2-537E-4F6C-D104768A1214")})).subscribe(),this.gestureSub=this.bluetoothService.notifyData.subscribe(e=>{console.log("notify data",e);const t=e[0];0===t&&(this.direction="up"),1===t&&(this.direction="down"),2===t&&(this.direction="left"),3===t&&(this.direction="right")})}convertCtoF(e){return 9*e/5+32}ngOnDestroy(){this.gestureSub&&this.gestureSub.unsubscribe()}webScan(){this.bluetoothService.onNewBluetooth(),this.bluetoothService.initializeBluetooth()}disconnect(){this.bluetoothService.onNewBluetooth()}}return c.\u0275fac=function(e){return new(e||c)(o.Y36(R),o.Y36($),o.Y36(se),o.Y36(G),o.Y36(W),o.Y36(J))},c.\u0275cmp=o.Xpm({type:c,selectors:[["app-explore-container"]],inputs:{name:"name"},decls:44,vars:18,consts:[["id","container"],[4,"ngIf"],[3,"datasets"],["expand","block",3,"click"],["color","success"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,X,3,0,"div",1),o.YNc(2,ee,3,0,"div",1),o.TgZ(3,"ion-grid")(4,"ion-row")(5,"ion-col")(6,"h2"),o._uU(7,"Temp"),o.qZA(),o.TgZ(8,"div")(9,"strong"),o._uU(10),o.ALo(11,"number"),o.qZA()(),o.TgZ(12,"div")(13,"strong"),o._uU(14),o.ALo(15,"number"),o.qZA()()(),o.TgZ(16,"ion-col")(17,"h2"),o._uU(18,"Humidity"),o.qZA(),o.TgZ(19,"div")(20,"strong"),o._uU(21),o.ALo(22,"number"),o.qZA()()(),o.TgZ(23,"ion-col")(24,"h2"),o._uU(25,"Gesture"),o.qZA(),o.TgZ(26,"div")(27,"strong"),o._uU(28),o.qZA()()()()(),o.TgZ(29,"h2"),o._uU(30,"Accelerometer"),o.qZA(),o.TgZ(31,"div"),o._UZ(32,"app-accelerometer",2),o.qZA(),o.TgZ(33,"h2"),o._uU(34,"Gyroscope"),o.qZA(),o.TgZ(35,"div"),o._UZ(36,"app-accelerometer",2),o.qZA(),o.TgZ(37,"h2"),o._uU(38,"Magnetometer"),o.qZA(),o.TgZ(39,"div"),o._UZ(40,"app-accelerometer",2),o.qZA(),o.TgZ(41,"div")(42,"ion-button",3),o.NdJ("click",function(){return t.disconnect()}),o._uU(43,"Disconnect"),o.qZA()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",!t.isConnected),o.xp6(1),o.Q6J("ngIf",t.isConnected),o.xp6(8),o.hij("",o.xi3(11,9,t.convertCtoF(t.tempService.temperature),"1.2-2")," \xb0F"),o.xp6(4),o.hij("",o.xi3(15,12,t.tempService.temperature,"1.2-2")," \xb0C"),o.xp6(7),o.hij("",o.xi3(22,15,t.humService.humidity,"1.2-2"),"%"),o.xp6(7),o.Oqu(t.direction),o.xp6(4),o.Q6J("datasets",t.accelService.datasets),o.xp6(4),o.Q6J("datasets",t.gyroService.datasets),o.xp6(4),o.Q6J("datasets",t.magService.datasets))},dependencies:[K.O5,B.yp,B.YG,B.wI,B.jY,B.Nd,Q.P,K.JJ],styles:["#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;padding-bottom:10%}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),c})()},314:(Y,I,g)=>{g.d(I,{e:()=>x});var h=g(6895),E=g(433),o=g(650),a=g(5732),_=g(8256);let x=(()=>{class d{}return d.\u0275fac=function(P){return new(P||d)},d.\u0275mod=_.oAB({type:d}),d.\u0275inj=_.cJS({imports:[h.ez,E.u5,o.Pc,a.b]}),d})()}}]);